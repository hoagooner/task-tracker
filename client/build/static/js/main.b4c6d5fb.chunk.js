(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{181:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(43),c=a.n(s),l=(a(96),a(8)),o=a(6),i=a.n(o),m=a(11),u=a(7),d=a(5),p=a.n(d),h=a(23),b=new h.a;var f=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(!1),l=Object(u.a)(c,2),o=l[0],i=l[1],m=Object(n.useState)([]),d=Object(u.a)(m,2),p=d[0],h=d[1],f=Object(n.useState)(),E=Object(u.a)(f,2),v=E[0],g=E[1];return Object(n.useEffect)((function(){e&&b.get("user")&&(s(!0),1==b.get("user").role&&(console.log("admin"),i(!0)))}),[e]),{isLogged:[r,s],isAdmin:[o,i],history:[p,h],user:[v,g]}},E=new h.a;var v=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),c=Object(u.a)(s,2),l=c[0],o=c[1],d=Object(n.useState)(0),h=Object(u.a)(d,2),b=h[0],f=h[1];return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/boards?user_id=".concat("undefined"===typeof E.get("user")?"":E.get("user")._id));case 2:t=e.sent,r(t.data.boards),f(t.data.result);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l]),{boards:[a,r],callback:[l,o],result:[b,f]}},g=Object(n.createContext)(),x=function(e){var t=e.children,a=Object(n.useState)(!1),s=Object(u.a)(a,2),c=s[0],l=s[1];Object(n.useEffect)((function(){if(localStorage.getItem("firstLogin")){var e=function(){var t=Object(m.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("/user/refresh_token");case 2:a=t.sent,l(a.data.accesstoken),setTimeout((function(){e()}),6e5);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e()}}),[]);var o={token:[c,l],userAPI:f(c),boardsAPI:v()};return r.a.createElement(g.Provider,{value:o},t)},y=a(86),k=a.n(y),j=a(87),O=a.n(j),S=new h.a;var w=function(){var e=Object(n.useContext)(g),t=Object(u.a)(e.userAPI.isLogged,1)[0],a=Object(u.a)(e.userAPI.isAdmin,1)[0],s=Object(n.useState)(!1),c=Object(u.a)(s,2),o=c[0],d=c[1],h=(e.userAPI.user,function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/user/logout");case 2:localStorage.removeItem("firstLogin"),S.remove("user",{path:"/"}),window.location.href="/";case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return r.a.createElement("header",null,r.a.createElement("div",{className:"menu",onClick:function(){return d(!o)}},r.a.createElement("img",{src:k.a,alt:"",width:"30"})),r.a.createElement("div",{className:"logo",style:{float:"left"}},r.a.createElement("h1",null,r.a.createElement(l.b,{to:"/",style:{textDecoration:"none"}},"Task Tracker"))),r.a.createElement("ul",{style:{float:"right",marginTop:"20px"}},r.a.createElement("li",null,r.a.createElement("p",null,t?S.get("user").name:"",a?" (admin)":"")),r.a.createElement("li",null,t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(l.b,{to:"/create_board",style:{textDecoration:"none",color:"black"}},"Create Board")))),r.a.createElement("li",null,a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(l.b,{to:"/users",style:{textDecoration:"none",color:"black"}},r.a.createElement("p",null,"Manage accounts"))))),t?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(l.b,{to:"/",onClick:h,style:{textDecoration:"none",color:"black"}},"Logout"))):r.a.createElement("li",null,r.a.createElement(l.b,{to:"/login",style:{textDecoration:"none"}},"Login")),r.a.createElement("li",{onClick:function(){return d(!o)}},r.a.createElement("img",{src:O.a,alt:"",width:"30",className:"menu"}))))},N=a(12),C=a(27),T=a(16);var _=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(u.a)(e,2),a=t[0],s=t[1],c=function(e){var t=e.target,n=t.name,r=t.value;s(Object(T.a)(Object(T.a)({},a),{},Object(C.a)({},n,r)))},o=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p.a.post("/user/login",Object(T.a)({},a));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("form",{onSubmit:o},r.a.createElement("h2",null,"Login"),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:a.email,onChange:c}),r.a.createElement("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:a.password,onChange:c}),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement(l.b,{to:"/register"},"Register"))))};var D=function(){var e=Object(n.useState)({name:"",email:"",password:""}),t=Object(u.a)(e,2),a=t[0],s=t[1],c=function(e){var t=e.target,n=t.name,r=t.value;s(Object(T.a)(Object(T.a)({},a),{},Object(C.a)({},n,r)))},o=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p.a.post("/user/register",Object(T.a)({},a));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("form",{onSubmit:o},r.a.createElement("h2",null,"Register"),r.a.createElement("input",{type:"text",name:"name",required:!0,placeholder:"Name",value:a.name,onChange:c}),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:a.email,onChange:c}),r.a.createElement("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:a.password,onChange:c}),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit"},"Register"),r.a.createElement(l.b,{to:"/login"},"Login"))))};var M=function(){return r.a.createElement("div",null,"404 | Not Found")};new h.a;var A=function(e){var t=e.board,a=e.deleteBoard;return Object(n.useContext)(g),r.a.createElement("div",{className:"row_btn"},r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"#!",className:"btn btn-danger",onClick:function(){return a(t._id,t.images.public_id)}},"Delete"),r.a.createElement(l.b,{className:"btn btn-primary",to:"/board/".concat(t._id)},"View")))},P=a(10),L=a(0);var I=function(e){var t=e.board,a=e.deleteBoard;return r.a.createElement("div",{className:"board_card",style:{display:"inline-block",borderRadius:"10px",border:"1px dotted gray"}},r.a.createElement(L.b.Provider,{value:{size:"25px"}},r.a.createElement("div",{style:{float:"right"}},r.a.createElement(l.b,{to:"/edit-board/".concat(t._id)},r.a.createElement(P.c,null)))),r.a.createElement("img",{src:t.images.url?t.images.url:"https://cdn1.iconfinder.com/data/icons/online-education-indigo-vol-2/256/Home_Education-512.png",alt:"image",style:{clear:"right"}}),r.a.createElement("div",{className:"board_box"},r.a.createElement("h3",{title:t.title},t.title)),r.a.createElement(A,{board:t,deleteBoard:a}))};var z=function(){var e=Object(n.useContext)(g),t=Object(u.a)(e.token,1)[0],a=Object(u.a)(e.boardsAPI.boards,2),s=a[0],c=(a[1],Object(u.a)(e.boardsAPI.callback,2)),l=c[0],o=c[1],d=function(){var e=Object(m.a)(i.a.mark((function e(a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=5;break}return r=p.a.post("/api/destroy",{public_id:n},{headers:{Authorization:t}}),e.next=5,r;case 5:return p.a.delete("/api/boards/".concat(a),{headers:{Authorization:t}}),e.next=8,d;case 8:o(!l),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"boards"},r.a.createElement("h2",null,"Your boards"),s.map((function(e){return r.a.createElement(I,{key:e._id,board:e,deleteBoard:d})})))},F=new h.a,U={user_id:"undefined"===typeof F.get("user")?"":F.get("user")._id,title:"",_id:"",description:""};var q=function(){var e=Object(n.useContext)(g),t=Object(n.useState)(U),a=Object(u.a)(t,2),s=a[0],c=a[1],l=Object(n.useState)(!1),o=Object(u.a)(l,2),d=o[0],h=o[1],b=Object(u.a)(e.token,1)[0],f=Object(N.g)(),E=Object(N.f)(),v=Object(u.a)(e.boardsAPI.boards,1)[0],x=Object(n.useState)(!1),y=Object(u.a)(x,2),k=y[0],j=y[1],O=Object(u.a)(e.boardsAPI.callback,2),S=O[0],w=O[1];Object(n.useEffect)((function(){f.id?(j(!0),v.forEach((function(e){e._id===f.id&&(c(e),h(e.images))}))):(j(!1),c(U),h(!1))}),[f.id,v]);var _=function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,a=t.target.files[0]){e.next=5;break}return e.abrupt("return",alert("File not exist."));case 5:if(!(a.size>1048576)){e.next=7;break}return e.abrupt("return",alert("Size too large!"));case 7:if("image/jpeg"===a.type||"image/png"===a.type){e.next=9;break}return e.abrupt("return",alert("File format is incorrect."));case 9:return(n=new FormData).append("file",a),e.next=13,p.a.post("/api/upload",n,{headers:{"content-type":"multipart/form-data",Authorization:b}});case 13:r=e.sent,h(r.data),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/api/destroy",{public_id:d.public_id},{headers:{Authorization:b}});case 3:h(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),M=function(e){var t=e.target,a=t.name,n=t.value;c(Object(T.a)(Object(T.a)({},s),{},Object(C.a)({},a,n)))},A=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!k){e.next=7;break}return e.next=5,p.a.put("/api/boards/".concat(s._id),Object(T.a)(Object(T.a)({},s),{},{images:d}),{headers:{Authorization:b}});case 5:e.next=9;break;case 7:return e.next=9,p.a.post("/api/boards",Object(T.a)(Object(T.a)({},s),{},{images:d}),{headers:{Authorization:b}});case 9:w(!S),E.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),P={display:d?"block":"none"};return r.a.createElement("div",{className:"row",style:{marginTop:"50px"}},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("input",{type:"file",name:"file",id:"file_up",onChange:_}),r.a.createElement("div",{id:"file_img",style:P},r.a.createElement("img",{src:d?d.url:"",alt:""}),r.a.createElement("span",{onClick:D},"X"))),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("form",{onSubmit:A},r.a.createElement("div",{className:"row",style:{margin:"20px",fontWeight:"bold"}},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",name:"title",id:"title",required:!0,class:"form-control",value:s.title,onChange:M})),r.a.createElement("div",{className:"row",style:{margin:"20px",fontWeight:"bold"}},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{type:"text",name:"description",id:"description",required:!0,class:"form-control",value:s.description,rows:"5",onChange:M})),r.a.createElement("div",{className:"row",style:{margin:"20px"}},r.a.createElement("button",{className:"btn btn-primary",type:"submit"},k?"Update":"Create")))))},B=a(28),R=a(29),W=a(9),H=a(31),J=a(30),V=function(e){return r.a.createElement("div",{className:"row",style:{padding:"18px 0px",border:"1px solid #e0e0d1",margin:"7px 0px"}},r.a.createElement("div",{class:"col-sm-1"},e.index+1),r.a.createElement("div",{class:"col-sm-3"},e.task.title),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{class:"col-sm-3"},e.task.startDate.substring(0,10)),r.a.createElement("div",{class:"col-sm-3"},e.task.endDate.substring(0,10)),r.a.createElement("div",{class:"col-sm-3"},r.a.createElement("span",{className:e.task.status.replace(/\s/g,"")},e.task.status)),r.a.createElement("div",{class:"col-sm-3"},r.a.createElement("span",{className:e.task.priority},e.task.priority)))),r.a.createElement("div",{class:"col-sm-1"},r.a.createElement(l.b,{style:{padding:"0px 7px"},to:"/board/".concat(e.task.board_id,"/edit-task/").concat(e.task._id)},r.a.createElement(P.d,null)),r.a.createElement(l.b,{onClick:function(){e.deleteTask(e.task._id)}},r.a.createElement(P.h,{style:{color:" #ff4d4d"}}))))},X=function(e){Object(H.a)(a,e);var t=Object(J.a)(a);function a(e){var n;return Object(B.a)(this,a),(n=t.call(this,e)).deleteTask=n.deleteTask.bind(Object(W.a)(n)),n.onSubmit=n.onSubmit.bind(Object(W.a)(n)),n.onChangeNewTaskTitle=n.onChangeNewTaskTitle.bind(Object(W.a)(n)),n.state={tasks:[],board:"",newTaskTitle:"",board_id:n.props.match.params.id},n}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(this.state.board_id),p.a.get("http://localhost:5000/api/tasks?board_id=".concat(this.state.board_id)).then((function(t){e.setState({tasks:t.data})})).catch((function(e){console.log(e)})),p.a.get("http://localhost:5000/api/board/".concat(this.state.board_id)).then((function(t){e.setState({board:t.data})})).catch((function(e){console.log(e)}))}},{key:"deleteTask",value:function(e){console.log(e),p.a.delete("http://localhost:5000/api/task/"+e).then((function(e){console.log(e.data)})),this.setState({tasks:this.state.tasks.filter((function(t){return t._id!==e}))})}},{key:"taskList",value:function(){var e=this;return this.state.tasks.map((function(t,a){return r.a.createElement(V,{task:t,index:a,onChangeStatus:e.onChangeStatus,deleteTask:e.deleteTask,key:t._id})}))}},{key:"onChangeNewTaskTitle",value:function(e){this.setState({newTaskTitle:e.target.value})}},{key:"onSubmit",value:function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={title:this.state.newTaskTitle,board_id:this.state.board_id},console.log(a),e.next=5,p.a.post("http://localhost:5000/api/tasks",a).then((function(e){return console.log(e.data)}));case 5:this.setState({newTaskTitle:""}),this.componentDidMount();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10"},r.a.createElement("h3",{style:{marginTop:"50px"}},this.state.board.title),r.a.createElement("h5",null,"Tasks: ",this.state.tasks.length,"  ")),r.a.createElement("div",{className:"col-2"},r.a.createElement(l.b,{style:{float:"right",marginTop:"50px"},to:"/board/".concat(this.state.board_id,"/members")},r.a.createElement("button",{className:"btn btn-secondary"},"Members")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{class:"col-sm-1"},r.a.createElement("b",null,"No.")),r.a.createElement("div",{class:"col-sm-3"},r.a.createElement("b",null,"Task")),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{class:"col-sm-3"},r.a.createElement("b",null,"Start Date")),r.a.createElement("div",{class:"col-sm-3"},r.a.createElement("b",null,"End Date")),r.a.createElement("div",{class:"col-sm-3"},r.a.createElement("b",null,"Status")),r.a.createElement("div",{class:"col-sm-3"},r.a.createElement("b",null,"Priority")))),r.a.createElement("div",{class:"col-sm-2"})),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"row",style:{padding:"20px 0px"}},r.a.createElement("div",{className:"col-sm-11"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",style:{border:"1px dotted #80e5ff",height:"60px"},required:!0,placeholder:"Add New Task",className:"form-control",value:this.state.newTaskTitle,onChange:this.onChangeNewTaskTitle}))),r.a.createElement("div",{className:"col-sm-1",style:{marginTop:"7"}},r.a.createElement("button",{type:"submit",style:{height:"60px"},className:"btn btn-outline-info"},"Add")))),this.taskList())}}]),a}(n.Component),Y=a(67),G=a.n(Y),K=(a(119),function(e){Object(H.a)(a,e);var t=Object(J.a)(a);function a(e){var n;return Object(B.a)(this,a),(n=t.call(this,e)).deleteTodo=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{p.a.delete("http://localhost:5000/api/todo/"+t).then((function(e){console.log(e.data)})),n.setState({todos:n.state.todos.filter((function(e){return e._id!==t}))})}catch(a){alert(a.response.data.msg)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onChangeStatusTodo=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.put("http://localhost:5000/api/todo/change-status/"+t).then((function(e){console.log(e.data)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 8:n.componentDidMount();case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),n.onChangeUsername=n.onChangeUsername.bind(Object(W.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(W.a)(n)),n.onChangeStartDate=n.onChangeStartDate.bind(Object(W.a)(n)),n.onChangeEndDate=n.onChangeEndDate.bind(Object(W.a)(n)),n.onChangeTitle=n.onChangeTitle.bind(Object(W.a)(n)),n.onChangeStatus=n.onChangeStatus.bind(Object(W.a)(n)),n.onChangePriority=n.onChangePriority.bind(Object(W.a)(n)),n.onChangeTitleTodo=n.onChangeTitleTodo.bind(Object(W.a)(n)),n.onChangeStatusTodo=n.onChangeStatusTodo.bind(Object(W.a)(n)),n.cancelUpdateTodo=n.cancelUpdateTodo.bind(Object(W.a)(n)),n.deleteTodo=n.deleteTodo.bind(Object(W.a)(n)),n.saveTodo=n.saveTodo.bind(Object(W.a)(n)),n.editTodo=n.editTodo.bind(Object(W.a)(n)),n.onSubmit=n.onSubmit.bind(Object(W.a)(n)),n.onSubmitTodo=n.onSubmitTodo.bind(Object(W.a)(n)),n.statuses=["Not Started","In Progress","In Review","Completed","Cancelled"],n.priorities=["Critical","High","Medium","Low"],n.state={board_id:n.props.match.params.board_id,task_id:n.props.match.params.task_id,username:"",title:"",_title:"",titleTodo:"",description:"",startDate:new Date,status:"Not Started",priority:"Medium",endDate:new Date,users:[],todos:[],isDone:!1,onEdit:!1,onEditTodo:!1},n}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.task_id),this.props.match.params.task_id&&(p.a.get("http://localhost:5000/api/task/"+this.props.match.params.task_id).then((function(t){e.setState({username:t.data.username,title:t.data.title,_title:t.data.title,description:t.data.description,startDate:new Date(t.data.startDate),endDate:new Date(t.data.endDate),status:t.data.status,priority:t.data.priority})})).catch((function(e){console.log(e)})),p.a.get("http://localhost:5000/api/todos?task_id="+this.props.match.params.task_id).then((function(t){e.setState({todos:t.data})})).catch((function(e){console.log(e)}))),p.a.get("http://localhost:5000/users/").then((function(t){t.data.length>0&&e.setState({users:t.data.map((function(e){return e.username})),username:t.data[0].username})})).catch((function(e){console.log(e)}))}},{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"onChangeStartDate",value:function(e){this.setState({startDate:e})}},{key:"onChangeEndDate",value:function(e){this.setState({endDate:e})}},{key:"onChangeStatus",value:function(e){this.setState({status:e.target.value})}},{key:"onChangePriority",value:function(e){this.setState({priority:e.target.value})}},{key:"onChangeTitleTodo",value:function(e){this.setState({titleTodo:e.target.value})}},{key:"cancelUpdateTodo",value:function(e){this.setState({onEditTodo:!1})}},{key:"saveTodo",value:function(e){this.setState({onEditTodo:!1})}},{key:"editTodo",value:function(e){this.setState({onEditTodo:!0})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={board_id:this.state.board_id,task_id:this.state.task_id,username:this.state.username,title:this.state.title,description:this.state.description,startDate:this.state.startDate,endDate:this.state.endDate,status:this.state.status,priority:this.state.priority};console.log(t),this.state.task_id?p.a.put("http://localhost:5000/api/task/"+this.state.task_id,t).then((function(e){return console.log(e.data)})):p.a.post("http://localhost:5000/api/tasks",t).then((function(e){return console.log(e.data)})),this.setState({_title:this.state.title})}},{key:"onSubmitTodo",value:function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={task_id:this.state.task_id,title:this.state.titleTodo,isDone:this.state.isDone},e.next=4,p.a.post("http://localhost:5000/api/todos",a).then((function(e){return console.log(e.data)}));case 4:this.setState({titleTodo:""}),this.componentDidMount();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.state.onEditTodo;return console.log(this.statuses),r.a.createElement("div",null,r.a.createElement(l.b,{to:"/board/".concat(this.state.board_id)},r.a.createElement(P.g,{style:{float:"right",marginTop:"-10px",marginRight:"13px",fontSize:"25px",color:"#c2c2a3"}})),r.a.createElement("div",{className:"container",style:{border:"1px solid #d6d6c2",marginTop:"30px"}},r.a.createElement("input",{type:"hidden",value:this.state.board_id}),r.a.createElement("input",{type:"hidden",value:this.props.match.params.task_id}),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("h3",{style:{marginTop:"20px"}},this.state._title),r.a.createElement("input",{type:"submit",value:this.state.task_id?"save":"Create",style:{float:"right"},className:"btn btn-primary"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("b",null,"Assignment to: ")),r.a.createElement("select",{ref:"userInput",className:"form-control",value:this.state.username,onChange:this.onChangeUsername},this.state.users.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("b",null,"Title: ")),r.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.title,onChange:this.onChangeTitle})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},r.a.createElement(P.a,{style:{fontSize:"25px",marginTop:"40px"}})),r.a.createElement("div",{className:"col-10"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("b",null,"Start Date: ")),r.a.createElement("div",{style:{width:"100%",display:"block"}},r.a.createElement(G.a,{selected:this.state.startDate,onChange:this.onChangeStartDate})))))),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},r.a.createElement(P.a,{style:{fontSize:"25px",marginTop:"40px"}})),r.a.createElement("div",{className:"col-10"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("b",null,"End Date:")," "),r.a.createElement("div",{style:{width:"100%",display:"block"}},r.a.createElement(G.a,{selected:this.state.endDate,onChange:this.onChangeEndDate})))))),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("b",null,"Status: ")),r.a.createElement("select",{class:"form-control",value:this.state.status,onChange:this.onChangeStatus},this.statuses.map((function(e){return r.a.createElement("option",{value:e},e)}))))),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("b",null,"Priority:")," "),r.a.createElement("select",{class:"form-control",value:this.state.priority,onChange:this.onChangePriority},this.priorities.map((function(e){return r.a.createElement("option",{value:e},e)})))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("b",null,"Description: ")),r.a.createElement("textarea",{type:"text",name:"description",id:"description",class:"form-control",value:this.state.description,rows:"4",onChange:this.onChangeDescription}))))),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("h5",{style:{marginTop:"20px",marginBottom:"20px"}},"to-do list"),r.a.createElement("form",{onSubmit:this.onSubmitTodo},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-11"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",style:{border:"1px dotted #80e5ff"},required:!0,className:"form-control",value:this.state.titleTodo,onChange:this.onChangeTitleTodo}))),r.a.createElement("div",{className:"col-sm-1"},r.a.createElement("button",{type:"submit"},r.a.createElement(P.e,{style:{color:"gray",fontSize:"30px",marginTop:"3px"}}))))),r.a.createElement("table",{className:"table table-striped",style:{marginBottom:"200px"}},this.state.todos.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"5%"}},!t.isDone&&r.a.createElement("button",{onClick:function(){return e.onChangeStatusTodo(t._id)},style:{color:"gray",fontSize:"20px",outline:"none",boxShadow:"none"}},r.a.createElement(P.f,null)),t.isDone&&r.a.createElement("button",{onClick:function(){return e.onChangeStatusTodo(t._id)},style:{color:"#7CB147",fontSize:"20px",outline:"none",boxShadow:"none"}},r.a.createElement(P.b,null))),r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{style:{width:"80%"},className:"align-middle"},t.title),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.deleteTodo(t._id)},style:{color:"#FF5B5B",fontSize:"18px",outline:"none",boxShadow:"none"}},r.a.createElement(P.h,null)))))}))))))}}]),a}(n.Component)),Q=a(55),Z=function(e){return r.a.createElement("tr",null,r.a.createElement("td",{class:"text-center"},e.index+1),r.a.createElement("td",{class:"text-center"},e.user.name),r.a.createElement("td",{class:"text-center"},e.user.email),r.a.createElement("td",{class:"text-center"},0==e.index?r.a.createElement("p",null,"Team owner"):r.a.createElement(l.b,{className:"btn btn-danger",onClick:function(){e.deleteMember(e.user._id)}},"Delete")))},$=function(e){Object(H.a)(a,e);var t=Object(J.a)(a);function a(e){var n;return Object(B.a)(this,a),(n=t.call(this,e)).deleteMember=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={user_id:t},e.next=4,p.a.put("http://localhost:5000/api/board/remove-member/"+n.state.board_id,a).then((function(e){console.log(e.data)}));case 4:n.setState({invitedMembers:n.state.invitedMembers.filter((function(e){return e._id!==t})),users:n.state.users.filter((function(e){return e._id!==t}))}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.deleteMember=n.deleteMember.bind(Object(W.a)(n)),n.onSubmit=n.onSubmit.bind(Object(W.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(W.a)(n)),n.state={email:"",users:[],board_id:n.props.match.params.board_id,board:"",members:[],member:"",foundMember:{},invitedMembers:[]},n}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this;p.a.get("http://localhost:5000/api/board/".concat(this.state.board_id)).then((function(t){e.setState({board:t.data,members:t.data.members}),e.state.members.map((function(t){t.accepted?p.a.get("http://localhost:5000/user/user/"+t.user_id).then((function(t){e.setState({users:[].concat(Object(Q.a)(e.state.users),[t.data])})})).catch((function(e){console.log(e)})):p.a.get("http://localhost:5000/user/user/"+t.user_id).then((function(t){e.setState({invitedMembers:[].concat(Object(Q.a)(e.state.invitedMembers),[t.data])})})).catch((function(e){console.log(e)}))}))})).catch((function(e){console.log(e)}))}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value,foundMember:{}})}},{key:"onSubmit",value:function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={email:this.state.email},e.next=4,p.a.post("http://localhost:5000/user/user-email",a).then((function(e){n.setState({foundMember:e.data})})).catch((function(e){console.log(e)}));case 4:Object.keys(this.state.foundMember).length>0&&(p.a.put("http://localhost:5000/api/board/invite-member/"+this.state.board_id,this.state.foundMember).then((function(e){return console.log(e.data)})),0==this.state.invitedMembers.filter((function(e){return e.email===n.state.foundMember.email})).length&&0==this.state.users.filter((function(e){return e.email===n.state.foundMember.email})).length&&this.setState({invitedMembers:[].concat(Object(Q.a)(this.state.invitedMembers),[this.state.foundMember]),email:""})),this.setState({email:""});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"userList",value:function(){var e=this;return this.state.users.map((function(t,a){return r.a.createElement(Z,{user:t,index:a,deleteMember:e.deleteMember,key:t._id})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("h3",{style:{marginTop:"50px"}},"Members"),r.a.createElement("table",{className:"table table-light"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{class:"text-center"},"No."),r.a.createElement("th",{class:"text-center"},"Name"),r.a.createElement("th",{class:"text-center"},"Email"),r.a.createElement("th",{class:"text-center"}))),r.a.createElement("tbody",null,this.userList()))),r.a.createElement("div",{className:"col-6"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"row",style:{marginTop:"70px",fontWeight:"bold"}},r.a.createElement("div",{className:"col-11"},r.a.createElement("label",{htmlFor:"email"},"Invite Team Members"),r.a.createElement("input",{type:"email",name:"email",id:"email",required:!0,class:"form-control",placeholder:"Enter email address",value:this.state.email,onChange:this.onChangeEmail})),r.a.createElement("div",{className:"col-sm-1"},r.a.createElement("button",{type:"submit",style:{outline:"none"}},r.a.createElement(P.e,{style:{color:"gray",fontSize:"30px",marginTop:"34px",marginLeft:"-20px"}}))))),r.a.createElement("table",{className:"table table-striped",style:{marginTop:"30px"}},this.state.invitedMembers.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"90%"},className:"align-middle"},t.email),r.a.createElement("td",{style:{width:"10%"}},r.a.createElement("button",{onClick:function(){return e.deleteMember(t._id)},style:{color:"red",fontSize:"20px",outline:"none",boxShadow:"none"}},r.a.createElement(P.g,null))))}))))))}}]),a}(n.Component),ee=(a(180),function(e){return r.a.createElement("tr",null,r.a.createElement("td",{class:"text-center"},e.index+1),r.a.createElement("td",{class:"text-center"},e.user.name),r.a.createElement("td",{class:"text-center"},e.user.email),r.a.createElement("td",{class:"text-center"},1==e.user.role?"admin":"member"),r.a.createElement("td",{class:"text-center"},r.a.createElement(l.b,{className:"btn btn-danger",onClick:function(){e.deleteUser(e.user._id)}},"Delete")))}),te=function(e){Object(H.a)(a,e);var t=Object(J.a)(a);function a(e){var n;return Object(B.a)(this,a),(n=t.call(this,e)).deleteUser=n.deleteUser.bind(Object(W.a)(n)),n.state={users:[]},n}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this;p.a.get("http://localhost:5000/user/users").then((function(t){console.log(t.data),e.setState({users:t.data})})).catch((function(e){console.log(e)}))}},{key:"deleteUser",value:function(e){console.log(e),p.a.delete("http://localhost:5000/user/delete?user_id="+e).then((function(e){console.log(e.data)})),this.setState({users:this.state.users.filter((function(t){return t._id!==e}))})}},{key:"userList",value:function(){var e=this;return this.state.users.map((function(t,a){return r.a.createElement(ee,{user:t,index:a,deleteUser:e.deleteUser,key:t._id})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h3",{style:{marginTop:"50px"}},"Account List"),r.a.createElement("table",{className:"table table-light"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{class:"text-center"},"No."),r.a.createElement("th",{class:"text-center"},"Name"),r.a.createElement("th",{class:"text-center"},"Email"),r.a.createElement("th",{class:"text-center"},"Role"),r.a.createElement("th",{class:"text-center"},"Status"))),r.a.createElement("tbody",null,this.userList())))}}]),a}(n.Component);var ae=function(){var e=Object(n.useContext)(g),t=Object(u.a)(e.userAPI.isLogged,1)[0],a=Object(u.a)(e.userAPI.isAdmin,1)[0];return r.a.createElement(N.c,null,r.a.createElement(N.a,{path:"/",exact:!0,component:t?z:_}),r.a.createElement(N.a,{path:"/login",exact:!0,component:t?M:_}),r.a.createElement(N.a,{path:"/users",exact:!0,component:a?te:M}),r.a.createElement(N.a,{path:"/register",exact:!0,component:t?M:D}),r.a.createElement(N.a,{path:"/login",exact:!0,component:t?M:_}),r.a.createElement(N.a,{path:"/register",exact:!0,component:t?M:D}),r.a.createElement(N.a,{path:"/create_board",exact:!0,component:t?q:M}),r.a.createElement(N.a,{path:"/create_board",exact:!0,component:t?q:M}),r.a.createElement(N.a,{path:"/board/:id",exact:!0,component:t?X:M}),r.a.createElement(N.a,{path:"/board/:board_id/edit-task/:task_id",exact:!0,component:t?K:M}),r.a.createElement(N.a,{path:"/board/:board_id/members",exact:!0,component:t?$:M}),r.a.createElement(N.a,{path:"/edit-board/:id",exact:!0,component:t?q:M}),r.a.createElement(N.a,{path:"/board/:board_id/create-task",exact:!0,component:t?K:M}),r.a.createElement(N.a,{path:"*",exact:!0,component:M}))};var ne=function(){return r.a.createElement(x,null,r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(w,null),r.a.createElement(ae,null))))};c.a.render(r.a.createElement(ne,null),document.getElementById("root"))},86:function(e,t,a){e.exports=a.p+"static/media/menu.b3f49afd.svg"},87:function(e,t,a){e.exports=a.p+"static/media/close.2c5552a1.svg"},91:function(e,t,a){e.exports=a(181)},96:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.b4c6d5fb.chunk.js.map